# Migration `20200416131007`

This migration has been generated by devnok at 4/16/2020, 1:10:07 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Rest" DROP COLUMN "location";
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200416122055..20200416131007
--- datamodel.dml
+++ datamodel.dml
@@ -3,30 +3,30 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model AccountLink {
   facebookId String? @unique
   kakaoId    String? @unique
-  userId     String @unique
-  user       User   @relation(fields: [userId], references: [id])
+  userId     String  @unique
+  User       User    @relation(fields: [userId], references: [id])
 }
 model Coupon {
   createdAt DateTime @default(now())
   desc      String
   expireAt  DateTime
   id        Int      @default(autoincrement()) @id
   restId    Int
-  service   String
+  servcie   String
   startAt   DateTime
   userId    String
   warn      String
-  rest      Rest     @relation(fields: [restId], references: [id])
-  user      User     @relation(fields: [userId], references: [id])
+  Rest      Rest     @relation(fields: [restId], references: [id])
+  User      User     @relation(fields: [userId], references: [id])
 }
 model Event {
   createdAt DateTime @default(now())
@@ -40,27 +40,19 @@
 model File {
   id     Int    @default(autoincrement()) @id
   restId Int
   url    String
-  rest   Rest   @relation(fields: [restId], references: [id])
+  Rest   Rest   @relation(fields: [restId], references: [id])
 }
 model Like {
   id     Int    @default(autoincrement()) @id
   restId Int
   userId String
-  rest   Rest   @relation(fields: [restId], references: [id])
-  user   User   @relation(fields: [userId], references: [id])
-  @@unique([restId, userId])
-}
+  Rest   Rest   @relation(fields: [restId], references: [id])
+  User   User   @relation(fields: [userId], references: [id])
-model Location {
-  latitude  Float
-  longitude Float
-  restId    Int   @unique
-  rest      Rest  @relation(fields: [restId], references: [id])
-
-  @@unique([latitude, longitude], name: "Location.latitude_longitude")
+  @@unique([restId, userId], name: "Like.restId_userId")
 }
 model Profile {
   birthday DateTime?
@@ -68,46 +60,55 @@
   gender   Gender?
   id       Int       @default(autoincrement()) @id
   name     String?
   userId   String    @unique
-  user     User      @relation(fields: [userId], references: [id])
+  User     User      @relation(fields: [userId], references: [id])
 }
 model Rest {
-  closeAt   DateTime?
-  desc      String
-  id        Int       @default(autoincrement()) @id
-  name      String
-  openAt    DateTime?
-  phone     String
-  thumbnail String
-  coupon    Coupon[]
-  files      File[]
-  like      Like[]
-  location  Location
-  service   Service?
+  closeAt     DateTime?
+  desc        String
+  id          Int        @default(autoincrement()) @id
+  // This type is currently not supported.
+  // location geography?
+  name        String
+  openAt      DateTime?
+  phone       String
+  thumbnail   String
+  Coupon      Coupon[]
+  File        File[]
+  Like        Like[]
+  Service     Service?
 }
 model Service {
   desc      String
   restId    Int     @unique
   service   String
   validTime Int     @default(168)
   warn      String?
-  rest      Rest    @relation(fields: [restId], references: [id])
+  Rest      Rest    @relation(fields: [restId], references: [id])
 }
 model User {
   createdAt   DateTime     @default(now())
-  id          String       @id @default(cuid())
+  id          String       @id
   nickname    String       @unique
   phone       String       @unique
-  accountLink AccountLink?
-  coupon      Coupon[]
-  like        Like[]
-  profile     Profile?
+  AccountLink AccountLink?
+  Coupon      Coupon[]
+  Like        Like[]
+  Profile     Profile?
 }
+model spatial_ref_sys {
+  auth_name String?
+  auth_srid Int?
+  proj4text String?
+  srid      Int     @id
+  srtext    String?
+}
+
 enum Gender {
   FEMALE
   MALE
 }
```


