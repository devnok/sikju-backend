# Migration `20200417145711`

This migration has been generated by devnok at 4/17/2020, 2:57:11 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Provider" AS ENUM ('KAKAO', 'FACEBOOK');

CREATE TABLE "public"."Authentication" (
    "code" text  NOT NULL ,
    "createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    "expireAt" timestamp(3)  NOT NULL ,
    "id" SERIAL,
    "limit" integer  NOT NULL DEFAULT 5,
    "provider" "Provider" NOT NULL ,
    "token" text  NOT NULL ,
    PRIMARY KEY ("id")
) 

CREATE UNIQUE INDEX "Authentication.provider_token" ON "public"."Authentication"("provider","token")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200416151048..20200417145711
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model AccountLink {
   facebookId String? @unique
@@ -103,17 +103,30 @@
   Coupon      Coupon[]
   Like        Like[]
   Profile     Profile
 }
+model Authentication {
+  id        Int      @default(autoincrement()) @id
+  provider Provider
+  token String
+  code String
+  limit Int @default(5)
+  createdAt DateTime @default(now())
+  expireAt DateTime
+  @@unique([provider, token])
+}
 model spatial_ref_sys {
   auth_name String?
   auth_srid Int?
   proj4text String?
   srid      Int     @id
   srtext    String?
 }
-
+enum Provider {
+  KAKAO
+  FACEBOOK
+}
 enum Gender {
   FEMALE
   MALE
 }
```


