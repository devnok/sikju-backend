# Migration `20200416131751`

This migration has been generated by devnok at 4/16/2020, 1:17:51 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Location" (
    "latitude" Decimal(65,30)  NOT NULL ,
    "longitude" Decimal(65,30)  NOT NULL ,
    "restId" integer  NOT NULL 
) 

CREATE UNIQUE INDEX "Location.restId" ON "public"."Location"("restId")

ALTER TABLE "public"."Location" ADD FOREIGN KEY ("restId")REFERENCES "public"."Rest"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200416131513..20200416131751
--- datamodel.dml
+++ datamodel.dml
@@ -3,9 +3,9 @@
 }
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 model AccountLink {
   facebookId String? @unique
@@ -67,10 +67,9 @@
 model Rest {
   closeAt     DateTime?
   desc        String
   id          Int        @default(autoincrement()) @id
-  // This type is currently not supported.
-  // location geography?
+  location  Location
   name        String
   openAt      DateTime?
   phone       String
   thumbnail   String
@@ -78,8 +77,14 @@
   File        File[]
   Like        Like[]
   Service     Service?
 }
+model Location {
+  Rest   Rest   @relation(fields: [restId], references: [id])
+  restId Int @unique
+  latitude Float
+  longitude Float
+}
 model Service {
   desc      String
   restId    Int     @unique
```


